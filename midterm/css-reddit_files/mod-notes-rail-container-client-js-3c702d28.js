import{j as e,c as s,i as t,_ as o,t as l,n as i,s as a,p as d,x as n,d as r,ad as c,$ as h,f as p,e as u}from"./shell-e94b58e1.js";import{t as m}from"./throttle-cde4a556.js";import{h as C,i as b,j as y}from"./mod-notes-d716492f.js";import"./icon-spoiler-outline-594d2c11.js";const S=e(a);let k=class extends S{constructor(){super(...arguments),this.isModNotesRailClientSourceLoaded=!1,this.isPDP=!1,this.openModNoteRail=async e=>{const s=document.getElementById(C);try{const t=this.querySelector(`faceplate-partial[name="${b}"]`),o=this.querySelector(`shreddit-async-loader[name="${b}"]`);if(!t||!o)return;this.classList.remove("hidden"),t.classList.add("hidden"),s?.classList.remove("hidden");let l=y;for(const s in e){const t=e[s];l=l.replace(`/:${s}`,`/${t}`)}t.src=l,this.isModNotesRailClientSourceLoaded?await t.load():(await Promise.allSettled([o.load(),t.load()]),this.isModNotesRailClientSourceLoaded=!0),s?.classList.add("hidden"),t.classList.remove("hidden")}catch(e){}this.onScrollHandlerThrottled()},this.onScrollHandler=()=>{const e=this.getBoundingClientRect();this.style.height=`calc(100vh - ${e.top}px - ${this.isPDP?"16px":"0"}16px - 1px)`},this.onScrollHandlerThrottled=m(this.onScrollHandler,200,!0),this.handleCloseClick=()=>{this.classList.add("hidden"),this.publish(d.ModNotesRailClose)}}connectedCallback(){super.connectedCallback(),this.subscribe(d.ModNotesRailOpen,this.openModNoteRail,!1),this.subscribe(d.ModNotesRailForceClose,this.handleCloseClick,!1),document.addEventListener("scroll",this.onScrollHandlerThrottled)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(d.ModNotesRailOpen,this.openModNoteRail),this.unsubscribe(d.ModNotesRailForceClose,this.handleCloseClick),document.removeEventListener("scroll",this.onScrollHandlerThrottled)}handleCloseKeyboardEnter(e){"Enter"===e.key&&this.handleCloseClick()}render(){return n`\n <slot></slot>\n <div \n class="absolute top-md right-md z-10" \n @click="${this.handleCloseClick}" \n @keyup="${this.handleCloseKeyboardEnter}" \n>\n ${r({leadingIcon:c({size:h.Small}),size:p.Small,attributes:{className:"opacity-80 button-media"}})}\n </div>\n `}};k.styles=[s,t`:host{display:block}`],o([l()],k.prototype,"isModNotesRailClientSourceLoaded",void 0),o([i({type:Boolean,attribute:"is-pdp"})],k.prototype,"isPDP",void 0),k=o([u("mod-notes-rail-closer")],k);
//# sourceMappingURL=mod-notes-rail-container-client-js-3c702d28.js.map
